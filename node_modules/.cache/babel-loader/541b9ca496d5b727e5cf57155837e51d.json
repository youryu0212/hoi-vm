{"ast":null,"code":"var _jsxFileName = \"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/CashReturnButton.jsx\",\n    _s = $RefreshSig$();\n\nimport { SetWalletMoneyContext, WalletMoneyContext } from 'App';\nimport { COIN_LIST } from 'Helper/constant';\nimport { InvestmentContext, SetInvestmentContext } from 'Pages/VendingMachine';\nimport { useContext } from 'react';\nimport { ReturnButton } from './CashReturnButton.styled';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CashReturnButton() {\n  _s();\n\n  const setInvestmnt = useContext(SetInvestmentContext);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const investment = useContext(InvestmentContext);\n  const walletMoney = useContext(WalletMoneyContext);\n\n  const calculateChange = (price, change, coin) => {\n    if (price === 0) {\n      return change;\n    }\n\n    const count = Math.floor(price / coin);\n\n    if (count === 0) {\n      return change;\n    }\n\n    price -= count * coin;\n    change[coin] = count;\n    return change;\n  };\n\n  const getChange = price => {\n    const coins = COIN_LIST;\n    return coins.reduce((change, coin) => calculateChange(price, change, coin), {});\n  };\n\n  const reflectChange = (wallet, coins) => {\n    Object.entries(coins).forEach(money => {\n      const [coin, cnt] = money;\n      wallet.amount[coin] = Number(wallet.amount[coin]) + cnt;\n    });\n  };\n\n  const handleReset = () => {\n    const investmentPrice = investment.amount;\n    investment.amount = 0;\n    const coins = getChange(investmentPrice);\n    reflectChange(walletMoney, coins);\n    const newInvestment = { ...investment\n    };\n    const newWalletMoney = { ...walletMoney\n    };\n    setInvestmnt(newInvestment);\n    setWalletMoney(newWalletMoney);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ReturnButton, {\n    flex: true,\n    justify: \"center\",\n    align: \"center\",\n    onClick: handleReset,\n    children: \"\\uAC70\\uC2A4\\uB984\\uB3C8 \\uBC18\\uD658\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CashReturnButton, \"1Nl8cyLBfYuHsT74ft00fUVyzaQ=\");\n\n_c = CashReturnButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"CashReturnButton\");","map":{"version":3,"names":["SetWalletMoneyContext","WalletMoneyContext","COIN_LIST","InvestmentContext","SetInvestmentContext","useContext","ReturnButton","CashReturnButton","setInvestmnt","setWalletMoney","investment","walletMoney","calculateChange","price","change","coin","count","Math","floor","getChange","coins","reduce","reflectChange","wallet","Object","entries","forEach","money","cnt","amount","Number","handleReset","investmentPrice","newInvestment","newWalletMoney"],"sources":["/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/CashReturnButton.jsx"],"sourcesContent":["import { SetWalletMoneyContext, WalletMoneyContext } from 'App';\nimport { COIN_LIST } from 'Helper/constant';\nimport { InvestmentContext, SetInvestmentContext } from 'Pages/VendingMachine';\nimport { useContext } from 'react';\nimport { ReturnButton } from './CashReturnButton.styled';\n\nexport default function CashReturnButton() {\n  const setInvestmnt = useContext(SetInvestmentContext);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const investment = useContext(InvestmentContext);\n  const walletMoney = useContext(WalletMoneyContext);\n\n  const calculateChange = (price, change, coin) => {\n    if (price === 0) {\n      return change;\n    }\n    const count = Math.floor(price / coin);\n    if (count === 0) {\n      return change;\n    }\n    price -= count * coin;\n    change[coin] = count;\n    return change;\n  };\n\n  const getChange = (price) => {\n    const coins = COIN_LIST;\n    return coins.reduce(\n      (change, coin) => calculateChange(price, change, coin),\n      {},\n    );\n  };\n\n  const reflectChange = (wallet, coins) => {\n    Object.entries(coins).forEach((money) => {\n      const [coin, cnt] = money;\n      wallet.amount[coin] = Number(wallet.amount[coin]) + cnt;\n    });\n  };\n\n  const handleReset = () => {\n    const investmentPrice = investment.amount;\n    investment.amount = 0;\n    const coins = getChange(investmentPrice);\n    reflectChange(walletMoney, coins);\n    const newInvestment = { ...investment };\n    const newWalletMoney = { ...walletMoney };\n    setInvestmnt(newInvestment);\n    setWalletMoney(newWalletMoney);\n  };\n  return (\n    <ReturnButton flex justify=\"center\" align=\"center\" onClick={handleReset}>\n      거스름돈 반환\n    </ReturnButton>\n  );\n}\n"],"mappings":";;;AAAA,SAASA,qBAAT,EAAgCC,kBAAhC,QAA0D,KAA1D;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,iBAAT,EAA4BC,oBAA5B,QAAwD,sBAAxD;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,YAAT,QAA6B,2BAA7B;;AAEA,eAAe,SAASC,gBAAT,GAA4B;EAAA;;EACzC,MAAMC,YAAY,GAAGH,UAAU,CAACD,oBAAD,CAA/B;EACA,MAAMK,cAAc,GAAGJ,UAAU,CAACL,qBAAD,CAAjC;EACA,MAAMU,UAAU,GAAGL,UAAU,CAACF,iBAAD,CAA7B;EACA,MAAMQ,WAAW,GAAGN,UAAU,CAACJ,kBAAD,CAA9B;;EAEA,MAAMW,eAAe,GAAG,CAACC,KAAD,EAAQC,MAAR,EAAgBC,IAAhB,KAAyB;IAC/C,IAAIF,KAAK,KAAK,CAAd,EAAiB;MACf,OAAOC,MAAP;IACD;;IACD,MAAME,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWL,KAAK,GAAGE,IAAnB,CAAd;;IACA,IAAIC,KAAK,KAAK,CAAd,EAAiB;MACf,OAAOF,MAAP;IACD;;IACDD,KAAK,IAAIG,KAAK,GAAGD,IAAjB;IACAD,MAAM,CAACC,IAAD,CAAN,GAAeC,KAAf;IACA,OAAOF,MAAP;EACD,CAXD;;EAaA,MAAMK,SAAS,GAAIN,KAAD,IAAW;IAC3B,MAAMO,KAAK,GAAGlB,SAAd;IACA,OAAOkB,KAAK,CAACC,MAAN,CACL,CAACP,MAAD,EAASC,IAAT,KAAkBH,eAAe,CAACC,KAAD,EAAQC,MAAR,EAAgBC,IAAhB,CAD5B,EAEL,EAFK,CAAP;EAID,CAND;;EAQA,MAAMO,aAAa,GAAG,CAACC,MAAD,EAASH,KAAT,KAAmB;IACvCI,MAAM,CAACC,OAAP,CAAeL,KAAf,EAAsBM,OAAtB,CAA+BC,KAAD,IAAW;MACvC,MAAM,CAACZ,IAAD,EAAOa,GAAP,IAAcD,KAApB;MACAJ,MAAM,CAACM,MAAP,CAAcd,IAAd,IAAsBe,MAAM,CAACP,MAAM,CAACM,MAAP,CAAcd,IAAd,CAAD,CAAN,GAA8Ba,GAApD;IACD,CAHD;EAID,CALD;;EAOA,MAAMG,WAAW,GAAG,MAAM;IACxB,MAAMC,eAAe,GAAGtB,UAAU,CAACmB,MAAnC;IACAnB,UAAU,CAACmB,MAAX,GAAoB,CAApB;IACA,MAAMT,KAAK,GAAGD,SAAS,CAACa,eAAD,CAAvB;IACAV,aAAa,CAACX,WAAD,EAAcS,KAAd,CAAb;IACA,MAAMa,aAAa,GAAG,EAAE,GAAGvB;IAAL,CAAtB;IACA,MAAMwB,cAAc,GAAG,EAAE,GAAGvB;IAAL,CAAvB;IACAH,YAAY,CAACyB,aAAD,CAAZ;IACAxB,cAAc,CAACyB,cAAD,CAAd;EACD,CATD;;EAUA,oBACE,QAAC,YAAD;IAAc,IAAI,MAAlB;IAAmB,OAAO,EAAC,QAA3B;IAAoC,KAAK,EAAC,QAA1C;IAAmD,OAAO,EAAEH,WAA5D;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAKD;;GAjDuBxB,gB;;KAAAA,gB"},"metadata":{},"sourceType":"module"}