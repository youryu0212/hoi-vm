{"ast":null,"code":"var _jsxFileName = \"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/CashReturnButton.jsx\",\n    _s = $RefreshSig$();\n\nimport { SetWalletMoneyContext, WalletMoneyContext } from 'App';\nimport { InvestmentContext, SetInvestmentContext } from 'Pages/VendingMachine';\nimport { useContext } from 'react';\nimport { ReturnButton } from './CashReturnButton.styled';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CashReturnButton() {\n  _s();\n\n  const setInvestmnt = useContext(SetInvestmentContext);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const investment = useContext(InvestmentContext);\n  const walletMoney = useContext(WalletMoneyContext);\n\n  const calculateChanges = price => {\n    const coins = [10000, 5000, 1000, 500, 100, 50, 10];\n    return coins.reduce((changes, coin) => {\n      if (price === 0) {\n        return changes;\n      }\n\n      const count = Math.floor(price / coin);\n\n      if (count === 0) {\n        return changes;\n      }\n\n      price -= count * coin;\n      changes[coin] = count;\n      return changes;\n    }, {});\n  };\n\n  const reflectChanges = (wallet, coins) => {\n    Object.entries(coins).forEach(money => {\n      const [coin, cnt] = money;\n      wallet.amount[coin] = Number(wallet.amount[coin]) + cnt;\n    });\n  };\n\n  const handleReset = () => {\n    const investmentPrice = investment.amount;\n    investment.amount = 0;\n    const coins = calculateChanges(investmentPrice);\n    reflectChanges(walletMoney, coins);\n    const newInvestment = { ...investment\n    };\n    const newWalletMoney = { ...walletMoney\n    };\n    setInvestmnt(newInvestment);\n    setWalletMoney(newWalletMoney);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ReturnButton, {\n    flex: true,\n    justify: \"center\",\n    align: \"center\",\n    onClick: handleReset,\n    children: \"\\uAC70\\uC2A4\\uB984\\uB3C8 \\uBC18\\uD658\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CashReturnButton, \"1Nl8cyLBfYuHsT74ft00fUVyzaQ=\");\n\n_c = CashReturnButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"CashReturnButton\");","map":{"version":3,"names":["SetWalletMoneyContext","WalletMoneyContext","InvestmentContext","SetInvestmentContext","useContext","ReturnButton","CashReturnButton","setInvestmnt","setWalletMoney","investment","walletMoney","calculateChanges","price","coins","reduce","changes","coin","count","Math","floor","reflectChanges","wallet","Object","entries","forEach","money","cnt","amount","Number","handleReset","investmentPrice","newInvestment","newWalletMoney"],"sources":["/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/CashReturnButton.jsx"],"sourcesContent":["import { SetWalletMoneyContext, WalletMoneyContext } from 'App';\nimport { InvestmentContext, SetInvestmentContext } from 'Pages/VendingMachine';\nimport { useContext } from 'react';\nimport { ReturnButton } from './CashReturnButton.styled';\n\nexport default function CashReturnButton() {\n  const setInvestmnt = useContext(SetInvestmentContext);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const investment = useContext(InvestmentContext);\n  const walletMoney = useContext(WalletMoneyContext);\n\n  const calculateChanges = (price) => {\n    const coins = [10000, 5000, 1000, 500, 100, 50, 10];\n    return coins.reduce((changes, coin) => {\n      if (price === 0) {\n        return changes;\n      }\n      const count = Math.floor(price / coin);\n      if (count === 0) {\n        return changes;\n      }\n      price -= count * coin;\n      changes[coin] = count;\n      return changes;\n    }, {});\n  };\n\n  const reflectChanges = (wallet, coins) => {\n    Object.entries(coins).forEach((money) => {\n      const [coin, cnt] = money;\n      wallet.amount[coin] = Number(wallet.amount[coin]) + cnt;\n    });\n  };\n\n  const handleReset = () => {\n    const investmentPrice = investment.amount;\n    investment.amount = 0;\n    const coins = calculateChanges(investmentPrice);\n    reflectChanges(walletMoney, coins);\n    const newInvestment = { ...investment };\n    const newWalletMoney = { ...walletMoney };\n    setInvestmnt(newInvestment);\n    setWalletMoney(newWalletMoney);\n  };\n  return (\n    <ReturnButton flex justify=\"center\" align=\"center\" onClick={handleReset}>\n      거스름돈 반환\n    </ReturnButton>\n  );\n}\n"],"mappings":";;;AAAA,SAASA,qBAAT,EAAgCC,kBAAhC,QAA0D,KAA1D;AACA,SAASC,iBAAT,EAA4BC,oBAA5B,QAAwD,sBAAxD;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,SAASC,YAAT,QAA6B,2BAA7B;;AAEA,eAAe,SAASC,gBAAT,GAA4B;EAAA;;EACzC,MAAMC,YAAY,GAAGH,UAAU,CAACD,oBAAD,CAA/B;EACA,MAAMK,cAAc,GAAGJ,UAAU,CAACJ,qBAAD,CAAjC;EACA,MAAMS,UAAU,GAAGL,UAAU,CAACF,iBAAD,CAA7B;EACA,MAAMQ,WAAW,GAAGN,UAAU,CAACH,kBAAD,CAA9B;;EAEA,MAAMU,gBAAgB,GAAIC,KAAD,IAAW;IAClC,MAAMC,KAAK,GAAG,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,GAApB,EAAyB,GAAzB,EAA8B,EAA9B,EAAkC,EAAlC,CAAd;IACA,OAAOA,KAAK,CAACC,MAAN,CAAa,CAACC,OAAD,EAAUC,IAAV,KAAmB;MACrC,IAAIJ,KAAK,KAAK,CAAd,EAAiB;QACf,OAAOG,OAAP;MACD;;MACD,MAAME,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWP,KAAK,GAAGI,IAAnB,CAAd;;MACA,IAAIC,KAAK,KAAK,CAAd,EAAiB;QACf,OAAOF,OAAP;MACD;;MACDH,KAAK,IAAIK,KAAK,GAAGD,IAAjB;MACAD,OAAO,CAACC,IAAD,CAAP,GAAgBC,KAAhB;MACA,OAAOF,OAAP;IACD,CAXM,EAWJ,EAXI,CAAP;EAYD,CAdD;;EAgBA,MAAMK,cAAc,GAAG,CAACC,MAAD,EAASR,KAAT,KAAmB;IACxCS,MAAM,CAACC,OAAP,CAAeV,KAAf,EAAsBW,OAAtB,CAA+BC,KAAD,IAAW;MACvC,MAAM,CAACT,IAAD,EAAOU,GAAP,IAAcD,KAApB;MACAJ,MAAM,CAACM,MAAP,CAAcX,IAAd,IAAsBY,MAAM,CAACP,MAAM,CAACM,MAAP,CAAcX,IAAd,CAAD,CAAN,GAA8BU,GAApD;IACD,CAHD;EAID,CALD;;EAOA,MAAMG,WAAW,GAAG,MAAM;IACxB,MAAMC,eAAe,GAAGrB,UAAU,CAACkB,MAAnC;IACAlB,UAAU,CAACkB,MAAX,GAAoB,CAApB;IACA,MAAMd,KAAK,GAAGF,gBAAgB,CAACmB,eAAD,CAA9B;IACAV,cAAc,CAACV,WAAD,EAAcG,KAAd,CAAd;IACA,MAAMkB,aAAa,GAAG,EAAE,GAAGtB;IAAL,CAAtB;IACA,MAAMuB,cAAc,GAAG,EAAE,GAAGtB;IAAL,CAAvB;IACAH,YAAY,CAACwB,aAAD,CAAZ;IACAvB,cAAc,CAACwB,cAAD,CAAd;EACD,CATD;;EAUA,oBACE,QAAC,YAAD;IAAc,IAAI,MAAlB;IAAmB,OAAO,EAAC,QAA3B;IAAoC,KAAK,EAAC,QAA1C;IAAmD,OAAO,EAAEH,WAA5D;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAKD;;GA5CuBvB,gB;;KAAAA,gB"},"metadata":{},"sourceType":"module"}