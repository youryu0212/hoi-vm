{"ast":null,"code":"import _slicedToArray from\"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{SetWalletMoneyContext,WalletMoneyContext,InvestmentContext,SetInvestmentContext,SetAlertMessage}from'App';import{COIN_LIST,INIT_ALERT_MESSAGE}from'Helper/constant';import{useContext}from'react';import{ReturnButton}from'./CashReturnButton.styled';import{jsx as _jsx}from\"react/jsx-runtime\";export default function CashReturnButton(){var setInvestmnt=useContext(SetInvestmentContext);var setWalletMoney=useContext(SetWalletMoneyContext);var setAlertMessage=useContext(SetAlertMessage);var investment=useContext(InvestmentContext);var walletMoney=useContext(WalletMoneyContext);var handleReset=function handleReset(){var investmentPrice=investment.amount;investment.amount=0;if(investmentPrice===0){return;}var coins=getChange(investmentPrice);reflectChange(walletMoney,coins);var newInvestment=_objectSpread({},investment);var newWalletMoney=_objectSpread({},walletMoney);var alertMessage=_objectSpread({},INIT_ALERT_MESSAGE);alertMessage.changeAmount=investmentPrice;setAlertMessage(alertMessage);setInvestmnt(newInvestment);setWalletMoney(newWalletMoney);};return/*#__PURE__*/_jsx(ReturnButton,{flex:true,justify:\"center\",align:\"center\",onClick:handleReset,children:\"\\uAC70\\uC2A4\\uB984\\uB3C8 \\uBC18\\uD658\"});}var calculateChange=function calculateChange(price,change,coin){if(price===0){return[price,change];}var count=Math.floor(price/coin);if(count===0){return[price,change];}price-=count*coin;change[coin]=count;return[price,change];};var getChange=function getChange(price){var coins=COIN_LIST;return coins.reduce(function(change,coin){var _calculateChange=calculateChange(price,change,coin);var _calculateChange2=_slicedToArray(_calculateChange,2);price=_calculateChange2[0];change=_calculateChange2[1];return change;},{});};var reflectChange=function reflectChange(wallet,coins){Object.entries(coins).forEach(function(money){var _money=_slicedToArray(money,2),coin=_money[0],cnt=_money[1];wallet.amount[coin]=Number(wallet.amount[coin])+cnt;});};","map":{"version":3,"names":["SetWalletMoneyContext","WalletMoneyContext","InvestmentContext","SetInvestmentContext","SetAlertMessage","COIN_LIST","INIT_ALERT_MESSAGE","useContext","ReturnButton","CashReturnButton","setInvestmnt","setWalletMoney","setAlertMessage","investment","walletMoney","handleReset","investmentPrice","amount","coins","getChange","reflectChange","newInvestment","newWalletMoney","alertMessage","changeAmount","calculateChange","price","change","coin","count","Math","floor","reduce","wallet","Object","entries","forEach","money","cnt","Number"],"sources":["/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/CashReturnButton.jsx"],"sourcesContent":["import {\n  SetWalletMoneyContext,\n  WalletMoneyContext,\n  InvestmentContext,\n  SetInvestmentContext,\n  SetAlertMessage,\n} from 'App';\nimport { COIN_LIST, INIT_ALERT_MESSAGE } from 'Helper/constant';\nimport { useContext } from 'react';\nimport { ReturnButton } from './CashReturnButton.styled';\n\nexport default function CashReturnButton() {\n  const setInvestmnt = useContext(SetInvestmentContext);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const setAlertMessage = useContext(SetAlertMessage);\n  const investment = useContext(InvestmentContext);\n  const walletMoney = useContext(WalletMoneyContext);\n\n  const handleReset = () => {\n    const investmentPrice = investment.amount;\n    investment.amount = 0;\n    if (investmentPrice === 0) {\n      return;\n    }\n    const coins = getChange(investmentPrice);\n    reflectChange(walletMoney, coins);\n    const newInvestment = { ...investment };\n    const newWalletMoney = { ...walletMoney };\n\n    const alertMessage = { ...INIT_ALERT_MESSAGE };\n    alertMessage.changeAmount = investmentPrice;\n    setAlertMessage(alertMessage);\n    setInvestmnt(newInvestment);\n    setWalletMoney(newWalletMoney);\n  };\n  return (\n    <ReturnButton flex justify=\"center\" align=\"center\" onClick={handleReset}>\n      거스름돈 반환\n    </ReturnButton>\n  );\n}\n\nconst calculateChange = (price, change, coin) => {\n  if (price === 0) {\n    return [price, change];\n  }\n  const count = Math.floor(price / coin);\n  if (count === 0) {\n    return [price, change];\n  }\n  price -= count * coin;\n  change[coin] = count;\n  return [price, change];\n};\n\nconst getChange = (price) => {\n  const coins = COIN_LIST;\n  return coins.reduce((change, coin) => {\n    [price, change] = calculateChange(price, change, coin);\n    return change;\n  }, {});\n};\n\nconst reflectChange = (wallet, coins) => {\n  Object.entries(coins).forEach((money) => {\n    const [coin, cnt] = money;\n    wallet.amount[coin] = Number(wallet.amount[coin]) + cnt;\n  });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}