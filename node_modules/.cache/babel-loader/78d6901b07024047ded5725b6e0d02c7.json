{"ast":null,"code":"import _objectSpread from\"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{SetWalletMoneyContext,WalletMoneyContext,InvestmentContext,SetInvestmentContext,SetAlertMessage}from'App';import{INIT_ALERT_MESSAGE}from'Helper/constant';import{useContext,useState}from'react';import{CashInput,Button,ChargeForm}from'./ChargeForm.styled';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ChargeScreen(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),cash=_useState2[0],setCash=_useState2[1];var setWalletMoney=useContext(SetWalletMoneyContext);var setInvestment=useContext(SetInvestmentContext);var setAlertMessage=useContext(SetAlertMessage);var walletMoney=useContext(WalletMoneyContext);var investment=useContext(InvestmentContext);var handleSubmit=function handleSubmit(evt){evt.preventDefault();var coins=walletMoney.amount;var adjustedCash=adjustCash(coins,cash);if(!isReasonableCoin(walletMoney,adjustedCash)){return;}chargeCash({investment:investment,setInvestment:setInvestment,walletMoney:walletMoney,setWalletMoney:setWalletMoney,setCash:setCash,adjustedCash:adjustedCash});alertChargeMessage({setAlertMessage:setAlertMessage,adjustedCash:adjustedCash});};var handleInputChange=function handleInputChange(evt){var value=evt.target.value;setCash(value);};return/*#__PURE__*/_jsxs(ChargeForm,{flex:true,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(CashInput,{type:\"text\",placeholder:\"\\uAE08\\uC561\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",flex:true,justify:\"center\",align:\"center\",onChange:handleInputChange,autoFocus:true,value:cash||''}),/*#__PURE__*/_jsx(Button,{type:\"submit\",flex:true,justify:\"center\",align:\"center\",children:\"\\uD074\\uB9AD\"})]});}var convertCoin=function convertCoin(replaceCoin,coinAndCount,cash){var _coinAndCount$map=coinAndCount.map(Number),_coinAndCount$map2=_slicedToArray(_coinAndCount$map,2),coin=_coinAndCount$map2[0],cnt=_coinAndCount$map2[1];if(cnt===0){return replaceCoin;}var moneyDiff=Math.abs(coin-cash);if(replaceCoin.moneyDiff>moneyDiff){var _ref=[moneyDiff,coin];replaceCoin.moneyDiff=_ref[0];replaceCoin.coin=_ref[1];}return replaceCoin;};var adjustCash=function adjustCash(coins,cash){cash=Number(cash);var _Object$entries$reduc=Object.entries(coins).reduce(function(replaceCoin,coinAndCount){return convertCoin(replaceCoin,coinAndCount,cash);},{moneyDiff:Infinity,coin:0}),coin=_Object$entries$reduc.coin;return coin;};var isReasonableCoin=function isReasonableCoin(walletMoney,cash){cash=Number(cash);if(cash===0){return;}var coins=walletMoney.amount;var reasonableCoin=Object.entries(coins).find(function(coin){var _coin$map=coin.map(Number),_coin$map2=_slicedToArray(_coin$map,2),money=_coin$map2[0],cnt=_coin$map2[1];return money===cash&&cnt>0;});return reasonableCoin;};var chargeCash=function chargeCash(_ref2){var investment=_ref2.investment,setInvestment=_ref2.setInvestment,walletMoney=_ref2.walletMoney,setWalletMoney=_ref2.setWalletMoney,setCash=_ref2.setCash,adjustedCash=_ref2.adjustedCash;investment.amount+=Number(adjustedCash);var newInvestment=_objectSpread({},investment);if(walletMoney.amount[adjustedCash]){walletMoney.amount[adjustedCash]-=1;}var newWalletMoney=_objectSpread({},walletMoney);setCash(adjustedCash);setInvestment(newInvestment);setWalletMoney(newWalletMoney);};var alertChargeMessage=function alertChargeMessage(_ref3){var setAlertMessage=_ref3.setAlertMessage,adjustedCash=_ref3.adjustedCash;var newAlertMessage=_objectSpread({},INIT_ALERT_MESSAGE);newAlertMessage.chargeCash=Number(adjustedCash);setAlertMessage(newAlertMessage);};","map":{"version":3,"names":["SetWalletMoneyContext","WalletMoneyContext","InvestmentContext","SetInvestmentContext","SetAlertMessage","INIT_ALERT_MESSAGE","useContext","useState","CashInput","Button","ChargeForm","ChargeScreen","cash","setCash","setWalletMoney","setInvestment","setAlertMessage","walletMoney","investment","handleSubmit","evt","preventDefault","coins","amount","adjustedCash","adjustCash","isReasonableCoin","chargeCash","alertChargeMessage","handleInputChange","value","target","convertCoin","replaceCoin","coinAndCount","map","Number","coin","cnt","moneyDiff","Math","abs","Object","entries","reduce","Infinity","reasonableCoin","find","money","newInvestment","newWalletMoney","newAlertMessage"],"sources":["/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/ChargeForm.jsx"],"sourcesContent":["import {\n  SetWalletMoneyContext,\n  WalletMoneyContext,\n  InvestmentContext,\n  SetInvestmentContext,\n  SetAlertMessage,\n} from 'App';\nimport { INIT_ALERT_MESSAGE } from 'Helper/constant';\nimport { useContext, useState } from 'react';\nimport { CashInput, Button, ChargeForm } from './ChargeForm.styled';\n\nexport default function ChargeScreen() {\n  const [cash, setCash] = useState(0);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const setInvestment = useContext(SetInvestmentContext);\n  const setAlertMessage = useContext(SetAlertMessage);\n  const walletMoney = useContext(WalletMoneyContext);\n  const investment = useContext(InvestmentContext);\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    const coins = walletMoney.amount;\n    const adjustedCash = adjustCash(coins, cash);\n\n    if (!isReasonableCoin(walletMoney, adjustedCash)) {\n      return;\n    }\n\n    chargeCash({\n      investment,\n      setInvestment,\n      walletMoney,\n      setWalletMoney,\n      setCash,\n      adjustedCash,\n    });\n    alertChargeMessage({ setAlertMessage, adjustedCash });\n  };\n\n  const handleInputChange = (evt) => {\n    const { value } = evt.target;\n    setCash(value);\n  };\n\n  return (\n    <ChargeForm flex onSubmit={handleSubmit}>\n      <CashInput\n        type=\"text\"\n        placeholder=\"금액을 입력하세요\"\n        flex\n        justify=\"center\"\n        align=\"center\"\n        onChange={handleInputChange}\n        autoFocus\n        value={cash || ''}\n      ></CashInput>\n      <Button type=\"submit\" flex justify=\"center\" align=\"center\">\n        클릭\n      </Button>\n    </ChargeForm>\n  );\n}\n\nconst convertCoin = (replaceCoin, coinAndCount, cash) => {\n  const [coin, cnt] = coinAndCount.map(Number);\n  if (cnt === 0) {\n    return replaceCoin;\n  }\n  const moneyDiff = Math.abs(coin - cash);\n  if (replaceCoin.moneyDiff > moneyDiff) {\n    [replaceCoin.moneyDiff, replaceCoin.coin] = [moneyDiff, coin];\n  }\n  return replaceCoin;\n};\n\nconst adjustCash = (coins, cash) => {\n  cash = Number(cash);\n\n  const { coin } = Object.entries(coins).reduce(\n    (replaceCoin, coinAndCount) => {\n      return convertCoin(replaceCoin, coinAndCount, cash);\n    },\n    {\n      moneyDiff: Infinity,\n      coin: 0,\n    },\n  );\n  return coin;\n};\n\nconst isReasonableCoin = (walletMoney, cash) => {\n  cash = Number(cash);\n  if (cash === 0) {\n    return;\n  }\n  const coins = walletMoney.amount;\n  const reasonableCoin = Object.entries(coins).find((coin) => {\n    const [money, cnt] = coin.map(Number);\n    return money === cash && cnt > 0;\n  });\n  return reasonableCoin;\n};\n\nconst chargeCash = ({ investment, setInvestment, walletMoney, setWalletMoney, setCash, adjustedCash }) => {\n  investment.amount += Number(adjustedCash);\n  const newInvestment = { ...investment };\n\n  if (walletMoney.amount[adjustedCash]) {\n    walletMoney.amount[adjustedCash] -= 1;\n  }\n  const newWalletMoney = { ...walletMoney };\n\n  setCash(adjustedCash);\n  setInvestment(newInvestment);\n  setWalletMoney(newWalletMoney);\n};\n\nconst alertChargeMessage = ({ setAlertMessage, adjustedCash }) => {\n  const newAlertMessage = { ...INIT_ALERT_MESSAGE };\n  newAlertMessage.chargeCash = Number(adjustedCash);\n  setAlertMessage(newAlertMessage);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}