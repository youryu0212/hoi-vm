{"ast":null,"code":"var _jsxFileName = \"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/CashReturnButton.jsx\",\n    _s = $RefreshSig$();\n\nimport { SetWalletMoneyContext, WalletMoneyContext } from 'App';\nimport { COIN_LIST, initOrderList } from 'Helper/constant';\nimport { InvestmentContext, SetInvestmentContext, SetOrderList } from 'Pages/VendingMachine';\nimport { useContext } from 'react';\nimport { ReturnButton } from './CashReturnButton.styled';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CashReturnButton() {\n  _s();\n\n  const setInvestmnt = useContext(SetInvestmentContext);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const setOrderList = useContext(SetOrderList);\n  const investment = useContext(InvestmentContext);\n  const walletMoney = useContext(WalletMoneyContext);\n\n  const handleReset = () => {\n    const investmentPrice = investment.amount;\n    investment.amount = 0;\n\n    if (investmentPrice === 0) {\n      return;\n    }\n\n    const coins = getChange(investmentPrice);\n    reflectChange(walletMoney, coins);\n    const newInvestment = { ...investment\n    };\n    const newWalletMoney = { ...walletMoney\n    };\n    const orderList = { ...initOrderList\n    };\n    orderList.changeAmount = investmentPrice;\n    setOrderList(orderList);\n    setInvestmnt(newInvestment);\n    setWalletMoney(newWalletMoney);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ReturnButton, {\n    flex: true,\n    justify: \"center\",\n    align: \"center\",\n    onClick: handleReset,\n    children: \"\\uAC70\\uC2A4\\uB984\\uB3C8 \\uBC18\\uD658\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CashReturnButton, \"mIRRZQbVNQvF+97X2K6r849uVSA=\");\n\n_c = CashReturnButton;\n\nconst calculateChange = (price, change, coin) => {\n  if (price === 0) {\n    return [price, change];\n  }\n\n  const count = Math.floor(price / coin);\n\n  if (count === 0) {\n    return [price, change];\n  }\n\n  price -= count * coin;\n  change[coin] = count;\n  return [price, change];\n};\n\nconst getChange = price => {\n  const coins = COIN_LIST;\n  return coins.reduce((change, coin) => {\n    [price, change] = calculateChange(price, change, coin);\n    return change;\n  }, {});\n};\n\nconst reflectChange = (wallet, coins) => {\n  Object.entries(coins).forEach(money => {\n    const [coin, cnt] = money;\n    wallet.amount[coin] = Number(wallet.amount[coin]) + cnt;\n  });\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"CashReturnButton\");","map":{"version":3,"names":["SetWalletMoneyContext","WalletMoneyContext","COIN_LIST","initOrderList","InvestmentContext","SetInvestmentContext","SetOrderList","useContext","ReturnButton","CashReturnButton","setInvestmnt","setWalletMoney","setOrderList","investment","walletMoney","handleReset","investmentPrice","amount","coins","getChange","reflectChange","newInvestment","newWalletMoney","orderList","changeAmount","calculateChange","price","change","coin","count","Math","floor","reduce","wallet","Object","entries","forEach","money","cnt","Number"],"sources":["/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MoneyScreenBoard/CashReturnButton.jsx"],"sourcesContent":["import { SetWalletMoneyContext, WalletMoneyContext } from 'App';\nimport { COIN_LIST, initOrderList } from 'Helper/constant';\nimport { InvestmentContext, SetInvestmentContext, SetOrderList } from 'Pages/VendingMachine';\nimport { useContext } from 'react';\nimport { ReturnButton } from './CashReturnButton.styled';\n\nexport default function CashReturnButton() {\n  const setInvestmnt = useContext(SetInvestmentContext);\n  const setWalletMoney = useContext(SetWalletMoneyContext);\n  const setOrderList = useContext(SetOrderList);\n  const investment = useContext(InvestmentContext);\n  const walletMoney = useContext(WalletMoneyContext);\n\n  const handleReset = () => {\n    const investmentPrice = investment.amount;\n    investment.amount = 0;\n    if (investmentPrice === 0) {\n      return;\n    }\n    const coins = getChange(investmentPrice);\n    reflectChange(walletMoney, coins);\n    const newInvestment = { ...investment };\n    const newWalletMoney = { ...walletMoney };\n\n    const orderList = { ...initOrderList };\n    orderList.changeAmount = investmentPrice;\n    setOrderList(orderList);\n    setInvestmnt(newInvestment);\n    setWalletMoney(newWalletMoney);\n  };\n  return (\n    <ReturnButton flex justify=\"center\" align=\"center\" onClick={handleReset}>\n      거스름돈 반환\n    </ReturnButton>\n  );\n}\n\nconst calculateChange = (price, change, coin) => {\n  if (price === 0) {\n    return [price, change];\n  }\n  const count = Math.floor(price / coin);\n  if (count === 0) {\n    return [price, change];\n  }\n  price -= count * coin;\n  change[coin] = count;\n  return [price, change];\n};\n\nconst getChange = (price) => {\n  const coins = COIN_LIST;\n  return coins.reduce((change, coin) => {\n    [price, change] = calculateChange(price, change, coin);\n    return change;\n  }, {});\n};\n\nconst reflectChange = (wallet, coins) => {\n  Object.entries(coins).forEach((money) => {\n    const [coin, cnt] = money;\n    wallet.amount[coin] = Number(wallet.amount[coin]) + cnt;\n  });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}