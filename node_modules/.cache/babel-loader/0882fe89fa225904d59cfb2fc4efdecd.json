{"ast":null,"code":"import _toConsumableArray from\"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{AlertMessage,SetAlertMessage}from'App';import{INIT_ALERT_MESSAGE}from'Helper/constant';import{getWonTemplate}from'Helper/utils';import{useCallback,useContext,useEffect,useState}from'react';import{Message,Screen,ScreenContainer}from'./MessageScreen.styled';import{jsx as _jsx}from\"react/jsx-runtime\";export default function MessageScreen(){var alertMessage=useContext(AlertMessage);var setAlertMessage=useContext(SetAlertMessage);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messageList=_useState2[0],setMessageList=_useState2[1];var createNewMessageList=useCallback(function(message){var newMessageList=[].concat(_toConsumableArray(messageList),[message]);return newMessageList;},[messageList]);useEffect(function(){var message=Object.entries(alertMessage).reduce(getAlertMessage,'');if(!message){return;}var newMessageList=createNewMessageList(message);setMessageList(newMessageList);setAlertMessage(INIT_ALERT_MESSAGE);},[alertMessage,setAlertMessage,createNewMessageList]);return/*#__PURE__*/_jsx(ScreenContainer,{children:/*#__PURE__*/_jsx(Screen,{children:messageList&&messageList.map(function(message,idx){return/*#__PURE__*/_jsx(Message,{children:message},createArrayKeyForNoHasID(message,idx));})})});}var getAlertMessage=function getAlertMessage(message,_ref){var _ref2=_slicedToArray(_ref,2),alertName=_ref2[0],alertAmount=_ref2[1];if(!alertAmount){return message;}return generateMessage(alertName,alertAmount);};var generateMessage=function generateMessage(alertName,alertAmount){var alerts={chargeCash:generateInvestmentMessage,changeAmount:generateChangeMessage,orderTitle:generateOrderMessage,wrong:generateWrongMessage};return alerts[alertName](alertAmount);};var generateOrderMessage=function generateOrderMessage(title){return\"\".concat(title,\"\\uAC00 \\uC8FC\\uBB38\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\");};var generateChangeMessage=function generateChangeMessage(amount){return\"\\uAC70\\uC2A4\\uB984\\uB3C8 \".concat(getWonTemplate(amount),\"\\uC774 \\uBC18\\uD658\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\");};var generateInvestmentMessage=function generateInvestmentMessage(amount){return\"\\uC790\\uD310\\uAE30\\uC5D0 \".concat(getWonTemplate(amount),\"\\uC774 \\uD22C\\uC785\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\");};var generateWrongMessage=function generateWrongMessage(){return\"\\uC8FC\\uBB38\\uD560 \\uC218 \\uC5C6\\uB294 \\uC0C1\\uD488\\uC785\\uB2C8\\uB2E4.\";};var createArrayKeyForNoHasID=function createArrayKeyForNoHasID(message,key){return\"\".concat(message+key);};","map":{"version":3,"names":["AlertMessage","SetAlertMessage","INIT_ALERT_MESSAGE","getWonTemplate","useCallback","useContext","useEffect","useState","Message","Screen","ScreenContainer","MessageScreen","alertMessage","setAlertMessage","messageList","setMessageList","createNewMessageList","message","newMessageList","Object","entries","reduce","getAlertMessage","map","idx","createArrayKeyForNoHasID","alertName","alertAmount","generateMessage","alerts","chargeCash","generateInvestmentMessage","changeAmount","generateChangeMessage","orderTitle","generateOrderMessage","wrong","generateWrongMessage","title","amount","key"],"sources":["/Users/ryuseonghyun/Desktop/codesquad/mission/fe-vm/fe/src/Components/MessageScreen.jsx"],"sourcesContent":["import { AlertMessage, SetAlertMessage } from 'App';\nimport { INIT_ALERT_MESSAGE } from 'Helper/constant';\nimport { getWonTemplate } from 'Helper/utils';\nimport { useCallback, useContext, useEffect, useState } from 'react';\nimport { Message, Screen, ScreenContainer } from './MessageScreen.styled';\n\nexport default function MessageScreen() {\n  const alertMessage = useContext(AlertMessage);\n  const setAlertMessage = useContext(SetAlertMessage);\n  const [messageList, setMessageList] = useState([]);\n\n  const createNewMessageList = useCallback(\n    (message) => {\n      const newMessageList = [...messageList, message];\n      return newMessageList;\n    },\n    [messageList],\n  );\n\n  useEffect(() => {\n    const message = Object.entries(alertMessage).reduce(getAlertMessage, '');\n    if (!message) {\n      return;\n    }\n\n    const newMessageList = createNewMessageList(message);\n    setMessageList(newMessageList);\n    setAlertMessage(INIT_ALERT_MESSAGE);\n  }, [alertMessage, setAlertMessage, createNewMessageList]);\n\n  return (\n    <ScreenContainer>\n      <Screen>\n        {messageList &&\n          messageList.map((message, idx) => <Message key={createArrayKeyForNoHasID(message, idx)}>{message}</Message>)}\n      </Screen>\n    </ScreenContainer>\n  );\n}\n\nconst getAlertMessage = (message, [alertName, alertAmount]) => {\n  if (!alertAmount) {\n    return message;\n  }\n  return generateMessage(alertName, alertAmount);\n};\n\nconst generateMessage = (alertName, alertAmount) => {\n  const alerts = {\n    chargeCash: generateInvestmentMessage,\n    changeAmount: generateChangeMessage,\n    orderTitle: generateOrderMessage,\n    wrong: generateWrongMessage,\n  };\n  return alerts[alertName](alertAmount);\n};\n\nconst generateOrderMessage = (title) => {\n  return `${title}가 주문되었습니다.`;\n};\n\nconst generateChangeMessage = (amount) => {\n  return `거스름돈 ${getWonTemplate(amount)}이 반환되었습니다.`;\n};\n\nconst generateInvestmentMessage = (amount) => {\n  return `자판기에 ${getWonTemplate(amount)}이 투입되었습니다.`;\n};\n\nconst generateWrongMessage = () => {\n  return `주문할 수 없는 상품입니다.`;\n};\n\nconst createArrayKeyForNoHasID = (message, key) => {\n  return `${message + key}`;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}